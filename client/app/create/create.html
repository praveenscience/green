<div ng-include="'components/navbar/navbar.html'"></div>
<div class="container page-container">
  <div class="row">
    <div class="form-meta">
      <div class="col-lg-8 col-sm-8">
        <div class="form-title">
          <input type="text" ng-model="form.name" class="form-control inlineInput flag">
        </div>
      </div>
      <div class="col-lg-4 col-sm-4">
        <div class="form-actions pull-right">
          <a class="btn btn-info btn-sm" href="/forms/{{form._id}}" tooltip="See how the form looks!" tooltip-append-to-body="true"  tooltip-placement="top">Preview</a>
          &nbsp;&nbsp;&nbsp;
          <button class="btn btn-success btn-sm" tooltip="Publish your form" tooltip-append-to-body="true" >Publish</button>
          &nbsp;&nbsp;&nbsp;
          <button class="btn btn-danger btn-sm" tooltip-append-to-body="true"  tooltip="Remove this form! Can't be reverted!"><em class="icon icon-remove"></em></button>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-3 col-sm-3 g-c-sidebar">
      <h4 class="g-c-section-heading">Sections</h4>
      <ul class="g-c-section-list">
        <li ng-repeat="section in form.sections" data-section-id="{{section._id}}" ng-click="loadSection(section)" ng-class="{active: section.active}"> {{section.title}} </li>
        <li class="g-c-section-text-input">
          <form ng-submit="addNewSection()">
            <input type="text" required class="form-control" ng-model="newSection" placeholder='+ Add new section' />
            <input type="submit" name="" hidden>
          </form>
        </li>
      </ul>
    </div>
    <div class="col-lg-9 col-sm-9 g-c-content">
      <tabset class="g-c-section-content">
      <tab ng-repeat="section in form.sections" active="section.active" disabled="section.disabled">
      <div class="row g-c-seciton-meta" sticky-media="(min-width:640px)">
        <div class="col-lg-8 col-sm-8">
          <input type="text" ng-model="section.title" class="form-control inlineInput">
        </div>
        <div class="col-lg-4 col-sm-4">
          <span class="last-save-text text-muted">
          <span ng-if='enableSaveButton'  tooltip-append-to-body="true"  tooltip="Last Saved on: {{getFormatedDate(section.updated)}}" tooltip-position="left"> Upto data!</span>
          <span ng-if='!enableSaveButton'  tooltip-append-to-body="true"  tooltip="Last Saved on: {{getFormatedDate(section.updated)}}" tooltip-position="left"> Section changed!</span>
          </span>
          <div class="pull-right">
            <div class="formSubmit">
              <div class="pull-right">
                <button class="btn btn-success" ng-click="submitSection(section, section._id)" ladda="sectionSaving" data-style="expand-left"
                ng-disabled="enableSaveButton"
                >Save</button>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <a tooltip-append-to-body="true"  tooltip="Remove this section!" href="" ng-click="removeSection(section)" class="btn btn-danger btn-sm"><em class="icon icon-remove"></em></a>
              </div>
              <div class="clearfix"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="ui-sortable sortableList" ui-sortable="sortableOptions" ng-model="section.fields">
        <div class="formFieldWrap" ng-repeat="field in section.fields">
          <div class="form-horizontal">
            <div class="formSection animate-if"  ng-if="field.edit_mode" >
              <div class="formSort"><div class="draghandle"></div></div>
              <div class="formFieldActions">
                <button class="btn btn-small inlineText" type="button" ng-if="section.fields.length > 1" ng-click="removeField(field, section)">
                <em class="icon icon-remove"></em>
                </button>
              </div>
              <div class="formField">
                <div class="form-group">
                  <label for="" class="col-lg-3 col-sm-3 control-label">Question Title</label>
                  <div class="col-lg-8 col-sm-8">
                    <input type="text" class="form-control" id="" placeholder="Untitled question" ng-model="field.label">
                  </div>
                </div>
                <div class="form-group">
                  <label for="" class="col-lg-3 col-sm-3 control-label">Help Text</label>
                  <div class="col-lg-8 col-sm-8">
                    <input type="text" class="form-control" id="" placeholder="Give some details" ng-model="field.help_text">
                  </div>
                </div>
                <div class="form-group">
                  <label for="" class="col-lg-3 col-sm-3 control-label">Question Type</label>
                  <div class="col-lg-8 col-sm-8">
                    <select name="" id="" class="form-control" ng-model="field.type">
                      <option value="text">Text</option>
                      <option value="textarea">Pharagraph</option>
                      <option value="select">Multiple Choice</option>
                      <option value="checkbox">Checkboxes</option>
                      <option value="radiobutton">Radio Buttons</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <field-element field="field"></field-element>
                </div>
                <div class="form-group">
                  <div class="col-lg-1 col-sm-1"></div>
                  <div class="col-lg-9 col-sm-9">
                    <button class="btn btn-info btn-sm" type="button" ng-disabled="!isValidField(field)" ng-click="toggleField(field)" > Done </button>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="checkbox" class="checkbox-small" name="optionsCheckboxes" type="checkbox" id="option6" ng-model="field.required">
                    <label for="" class="smallText">Make this as required field</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="formSectionPrev" ng-if="!field.edit_mode">
            <div class="formFieldActions">
              <div class="hList">
                <button class="btn btn-small" type="button" ng-click="toggleField(field)">
                <em class="icon icon-pencil"></em>
                </button>
                <button class="btn btn-small inlineText" type="button" ng-if="section.fields.length > 1" ng-click="removeField(field, section)">
                <em class="icon icon-remove"></em>
                </button>
              </div>
            </div>
            <div class="formFieldPrev js_form_template">
<prev-element field="field"></prev-element>
            </div>
          </div>
        </div>
        <div class="addNewField">
          <div class="btn-toolbar clearfix">
            <a href="" class="btn btn-sm btn-default" ng-click="addField(section)" type="button" href=''>
<em class="icon icon-plus"></em> Add New Field
            </a>
          </div>
        </div>
        <div class="row" sticky-media="(min-width:640px)">
          <div class="col-lg-8 col-sm-8">
          </div>
          <div class="col-lg-4 col-sm-4">
            <span class="last-save-text text-muted">
              <span ng-if='enableSaveButton'  tooltip-append-to-body="true"  tooltip="Last Saved on: {{getFormatedDate(section.updated)}}" tooltip-position="left"> Upto data!</span>
              <span ng-if='!enableSaveButton'  tooltip-append-to-body="true"  tooltip="Last Saved on: {{getFormatedDate(section.updated)}}" tooltip-position="left"> Section changed!</span>
            </span>
            <div class="pull-right">
              <div class="formSubmit">
                <div class="pull-right">
                  <button class="btn btn-success" ng-click="submitSection(section, section._id)" ladda="sectionSaving" data-style="expand-left"
                  ng-disabled="enableSaveButton"
                  >Save</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
</tab>
</tabset>
    </div>
  </div>
</div>
<div ng-include="'components/footer/footer.html'"></div>
